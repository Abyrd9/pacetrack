import{v as f,a0 as j,a1 as g,b as w,j as e,B as i,L as c}from"./main-CGtgWssC.js";import{u as y,s as N,c as v,a as b,L as m,I as S,d as t}from"./input-Dl9IHLeN.js";import{E,a as F,A as T,G as I}from"./SignInFormGoogle-B2Yp6w8-.js";const C=()=>{const d=f(),{data:r,isPending:o,mutate:u}=y({mutationFn:async s=>{s.preventDefault();let n;if(s.target instanceof HTMLFormElement)n=s.target;else if(s.currentTarget instanceof HTMLFormElement)n=s.currentTarget;else throw new Error("Form element not found");const p=new FormData(n),{data:h}=await v(j,{method:"POST",body:p});return h},onSuccess:s=>{s.status==="ok"&&(s.payload?.csrfToken&&N(s.payload.csrfToken),d.navigate({to:"/",replace:!0}))}}),{fields:a}=b({schema:g,errors:r?.errors}),[l,x]=w.useState(!1);return e.jsxs("form",{method:"POST",onSubmit:u,children:[e.jsxs("div",{className:"pb-4",children:[e.jsx(m,{htmlFor:a.email.name,children:"Email address"}),e.jsx(S,{type:"email",name:a.email.name,value:a.email.value,onChange:s=>a.email.onChange(s.target.value),className:"w-full max-w-none",placeholder:"john.doe@example.com"}),a.email.error&&e.jsx(t.Error,{children:a.email.error})]}),e.jsxs("div",{className:"pb-2",children:[e.jsx(m,{htmlFor:a.password.name,children:"Password"}),e.jsxs(t,{className:"space-x-2",children:[e.jsx(t.Input,{type:l?"text":"password",name:a.password.name,value:a.password.value,onChange:s=>a.password.onChange(s.target.value)}),e.jsx("button",{type:"button",onClick:()=>x(s=>!s),children:l?e.jsx(E,{}):e.jsx(F,{})})]}),a.password.error&&e.jsx(t.Error,{children:a.password.error}),(r?.errors?.form||r?.errors?.global)&&e.jsx(t.Error,{children:r?.errors.form||r?.errors.global})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx(i,{color:"primary",className:"w-full space-x-2",isLoading:o,disabled:o,type:"submit",children:e.jsxs(i.Loader,{className:"flex w-full items-center justify-center space-x-2",children:[e.jsx("span",{children:"Sign in"}),e.jsx(T,{className:"text-base"})]})}),e.jsx("div",{className:"w-full flex justify-center pt-3",children:e.jsx(c,{to:"/auth/forgot-password",className:"text-xs text-primary underline",children:"Forgot your password?"})}),e.jsxs("span",{className:"pt-5 text-center text-sm w-full block",children:["Don't have an account?"," ",e.jsx(c,{className:"text-primary underline",to:"/auth/sign-up",children:"Sign up"})]})]})]})};function R(){return e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsxs("div",{className:"flex items-center space-x-3 py-6",children:[e.jsx("div",{className:"h-[1px] w-full bg-gray-100"}),e.jsx("span",{className:"-translate-y-[2px] text-sm text-muted-foreground",children:"or"}),e.jsx("div",{className:"h-[1px] w-full bg-gray-100"})]}),e.jsx(C,{})]})}export{R as component};
